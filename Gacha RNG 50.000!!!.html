<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trình Tạo Thú Cưng Ngẫu Nhiên</title>
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background: linear-gradient(135deg, #f5f7fa, #c3cfe2);
            margin: 0;
        }
        .container {
            text-align: center;
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            position: relative;
            margin: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            max-width: 90%;
        }
        .generate-button {
            position: relative;
            margin-top: 20px;
            cursor: pointer;
            background: #00ff00; /* Màu xanh lá cây tươi để tăng độ tương phản */
            border: none;
            border-radius: 50%;
            width: 100px;
            height: 100px;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background 0.3s, box-shadow 0.3s;
            box-shadow: 0 0 10px rgba(0, 255, 0, 0.5); /* Thêm bóng để tăng sự nổi bật */
        }
        .generate-button:hover {
            background: #00cc00; /* Màu xanh lá cây đậm hơn khi hover */
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.7); /* Tăng bóng khi hover */
        }
        .dice-icon {
            width: 50px;
            height: 50px;
        }
        .countdown-bar {
            width: 100%;
            height: 10px;
            background-color: #4caf50;
            position: absolute;
            bottom: 0;
            left: 0;
            transition: width 2s linear;
        }
        .history {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            max-height: 400px;
            overflow-y: auto;
            margin-top: 20px;
            width: 100%;
            position: relative;
        }
        .history-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .info-button {
            width: 30px;
            height: 30px;
            background: url('https://static.thenounproject.com/png/2392586-200.png') no-repeat center center;
            background-size: cover;
            cursor: pointer;
            border: none;
            border-radius: 50%;
        }
        .info-modal, .pet-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            display: none;
        }
        .modal-content {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            max-width: 90%;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
        }
        th {
            background-color: #f2f2f2;
        }
        input[type="text"] {
            padding: 10px;
            margin-top: 20px;
            font-size: 16px;
            width: calc(100% - 22px);
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        button {
            padding: 10px 20px;
            margin-top: 10px;
            font-size: 16px;
            background-color: #4caf50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s;
        }
        button:hover {
            background-color: #45a049;
        }
        #money-container {
            font-size: 24px;
            display: flex;
            align-items: center;
        }
        .coin {
            position: absolute;
            font-size: 20px;
            animation: fly 1s ease-out forwards;
        }
        @keyframes fly {
            0% {
                opacity: 1;
                transform: translateY(0);
            }
            100% {
                opacity: 0;
                transform: translateY(-50px);
            }
        }
        .pet-image {
            width: 80px;
            height: 80px;
            object-fit: cover;
            margin-top: 10px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        .luck-icon {
            width: 20px;
            height: 20px;
            margin-left: 5px;
        }
        @media (max-width: 600px) {
            .container {
                padding: 10px;
                margin: 10px;
            }
            .pet-image {
                width: 60px;
                height: 60px;
            }
            input[type="text"] {
                font-size: 14px;
            }
            #money-container {
                font-size: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Trình Tạo Thú Cưng Ngẫu Nhiên</h1>
        <p>Nhấn nút để nhận thú cưng ngẫu nhiên:</p>
        <div class="generate-button" onclick="generateRandomPet()">
            <img src="https://pbs.twimg.com/media/GUmOAlVWkAEyiRC.png" alt="Dice Icon" class="dice-icon">
        </div>
        <p id="result"></p>
        <img id="pet-image" class="pet-image" src="" alt="Pet Image">
        <p id="probability"></p>
        <p id="spin-count"></p>
        <p id="next-luck"></p>
        <div class="countdown-bar" id="countdown-bar"></div>
        <div>
            <input type="text" id="code-input" placeholder="Nhập mã" oninput="normalizeCode(this)">
            <button onclick="submitCode()">Gửi mã</button>
        </div>
    </div>
    <div class="history">
        <div class="history-header">
            <h2>Thú Cưng Đã Nhận</h2>
            <div id="money-container">
                <span id="money">0</span>
                <img id="money-image" src="https://i.ibb.co/8X276fY/Coin.webp" alt="icon tiền" style="width: 24px; height: 24px; margin-left: 5px;">
            </div>
            <button class="info-button" onclick="showInfoModal()"></button>
        </div>
        <table id="history-table">
            <thead>
                <tr>
                    <th>Thú Cưng</th>
                    <th>Xác Suất</th>
                    <th>Thông Tin</th>
                </tr>
            </thead>
            <tbody>
                <!-- Thú cưng ngẫu nhiên sẽ được thêm vào đây -->
            </tbody>
        </table>
    </div>
    <div class="info-modal" id="info-modal" onclick="closeModal('info-modal')">
        <div class="modal-content" onclick="event.stopPropagation()">
            <h2>Thông Tin</h2>
            <p id="total-time"></p>
            <p id="best-random"></p>
            <p id="total-coins"></p>
        </div>
    </div>
    <div class="pet-modal" id="pet-modal" onclick="closeModal('pet-modal')">
        <div class="modal-content" onclick="event.stopPropagation()">
            <img id="pet-modal-image" src="" alt="Pet Image" class="pet-image">
            <p id="pet-modal-info"></p>
        </div>
    </div>
    <script>
        const pets = [
            { name: 'Cat', probability: 1/20, image: 'https://ih1.redbubble.net/image.5524686591.1356/raf,360x360,075,t,fafafa:ca443f4786.jpg' },
            { name: 'Dog', probability: 1/10, image: 'https://fagopet.vn/storage/dq/36/dq365u8lutu3hcfnfzyrck2lamjm_cho-poodle-nau.webp' },
            { name: 'Rabbit', probability: 1/15, image: 'https://images.ctfassets.net/rt5zmd3ipxai/189GnSsegQkBWUqGJGED6E/c0108e32656d5f4714187a9a58f75295/AdobeStock_247330858.jpeg?fit=fill&fm=webp&h=480&w=782&q=72,%20https://images.ctfassets.net/rt5zmd3ipxai/189GnSsegQkBWUqGJGED6E/c0108e32656d5f4714187a9a58f75295/AdobeStock_247330858.jpeg?fit=fill&fm=webp&h=960&w=1564&q=72' },
            { name: 'Hamster', probability: 1/25, image: 'https://lolipet.net/wp-content/uploads/2023/11/z4857310072695_728959d9bec5acddc5a04e389c77c113.jpg' },
            { name: 'Fish', probability: 1/5, image: 'https://i.natgeofe.com/n/18708334-6fce-40b5-ade6-a7e2db7035f2/01-goldfish-nationalgeographic_1567132.jpg?wp=1&w=1084.125&h=721.875' },
            { name: 'Parrot', probability: 1/30, image: 'https://blog.nature.org/wp-content/uploads/2019/09/5466780476_47f0336213_o.jpg?w=1024' },
            { name: 'Turtle', probability: 1/50, image: 'https://ih1.redbubble.net/image.1123475296.4644/flat,750x,075,f-pad,750x1000,f8f8f8.jpg' },
            { name: 'MeoBeo', probability: 1/999, image: 'https://cdn.tuoitre.vn/thumb_w/480/471584752817336320/2024/5/20/meo-beo-1716184689176563233778.jpg' },
            { name: 'Guinea Pig', probability: 1/35, image: 'https://i.pinimg.com/736x/96/ae/9e/96ae9eab678fc1a50af63acd5e5ab2dd.jpg' },
            { name: 'Chinchilla', probability: 1/45, image: 'https://cdn1.tedsby.com/storage/1/1/5/1159559/mouse-chinchilla-by-ekaterina-usenko.jpg' },
            { name: 'Horse', probability: 1/100, image: 'https://static.wikia.nocookie.net/pets-go/images/c/c3/Horse.png/revision/latest?cb=20241011170127' },
            { name: 'Panda', probability: 1/200, image: 'https://static.wikia.nocookie.net/pets-go/images/9/9d/Pirate_Panda.png/revision/latest?cb=20241011195005' },
            { name: 'Koala', probability: 1/150, image: 'https://i.pinimg.com/236x/90/de/ac/90deaced0f9448c83c4f7fd0ffdacdcd.jpg' },
            { name: 'Penguin', probability: 1/120, image: 'https://static.wikia.nocookie.net/pets-go/images/9/97/Penguin.png/revision/latest?cb=20241011171251' },
            { name: 'Fox', probability: 1/80, image: 'https://static.wikia.nocookie.net/pets-go/images/7/73/Fox.png/revision/latest/scale-to-width-down/80?cb=20241011164525' },
            { name: 'Lion', probability: 1/110, image: 'https://static.wikia.nocookie.net/pets-go/images/4/47/Lion.png/revision/latest/scale-to-width-down/80?cb=20241011172026' },
            { name: 'Tiger', probability: 1/130, image: 'https://static.wikia.nocookie.net/pets-go/images/a/ae/Tiger.png/revision/latest/scale-to-width-down/80?cb=20241011193504' },
            { name: 'Elephant', probability: 1/140, image: 'https://static.wikia.nocookie.net/pets-go/images/6/60/Elephant.png/revision/latest/scale-to-width-down/80?cb=20241011164820' },
            { name: 'Giraffe', probability: 1/160, image: 'https://static.wikia.nocookie.net/pets-go/images/6/60/Giraffe.png/revision/latest/scale-to-width-down/80?cb=20241011193647' },
    // Hoa quả phổ biến
    { name: 'Banana', probability: 1/31000, image: 'https://www.shutterstock.com/image-vector/banana-cat-isolated-on-white-260nw-2353794733.jpg' },
    { name: 'Apple', probability: 1/32000, image: 'https://assets.coingecko.com/coins/images/36349/large/acat.png?1711188328' },
    { name: 'Orange', probability: 1/33000, image: 'https://images-handler.kamereo.vn/eyJidWNrZXQiOiJpbWFnZS1oYW5kbGVyLXByb2QiLCJrZXkiOiJzdXBwbGllci82NTQvUFJPRFVDVF9JTUFHRS8zMzBkYWQwYi01M2U0LTQ0MGItYjNlMC1kMjYxOTJjMTE1YzYucG5nIn0=' },
    { name: 'Strawberry', probability: 1/34000, image: 'https://www.calgiant.com/wp-content/uploads/2021/08/berry-iso-straw-1-878x1024.png' },
    { name: 'Watermelon', probability: 1/35000, image: 'https://ih1.redbubble.net/image.1320803020.3540/bg,f8f8f8-flat,750x,075,f-pad,750x1000,f8f8f8.u2.jpg' },
    { name: 'Pineapple', probability: 1/36000, image: 'https://img.wattpad.com/daaae6be9230e3457ff7b3a5be356cbf60814bc5/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f776174747061642d6d656469612d736572766963652f53746f7279496d6167652f443239554d707536766a364d51513d3d2d3536333930323332332e313532373364356533626166383761333837383439383036393338392e6a7067?s=fit&w=720&h=720' },
    { name: 'Mango', probability: 1/37000, image: 'https://i.pinimg.com/originals/13/35/64/1335641b1ea07ba362d09e941fad28c9.jpg' },
    { name: 'Grapes', probability: 1/38000, image: 'https://static.vecteezy.com/system/resources/previews/027/254/790/non_2x/grapes-isolated-on-transparent-background-file-cut-out-ai-generated-png.png' },
    { name: 'Cherry', probability: 1/39000, image: 'https://images3.memedroid.com/images/UPLOADED390/598851c34322d.jpeg' },
    { name: 'Peach', probability: 1/40000, image: 'https://i.chzbgr.com/full/9102040832/h1E529CE6/a-cigarette-supposed-to-be-princess-peach-saying-she-hasnt-heard-the-names-mario-and-luigi-in-years' },
    { name: 'Avocado', probability: 1/41000, image: 'https://i.chzbgr.com/full/9196866816/h46E2A6DC/did-you-knowthe-aztec-word-for-avocado-means-testicle-tree' },
    { name: 'Coconut', probability: 1/42000, image: 'https://i.pinimg.com/736x/d5/be/56/d5be56bdff6f7e88bb8ac80a8d924baf.jpg' },
    { name: 'Kiwi', probability: 1/43000, image: 'https://ih1.redbubble.net/image.5047482046.3553/raf,360x360,075,t,fafafa:ca443f4786.jpg' },
    { name: 'Lemon', probability: 1/44000, image: 'https://i.redd.it/42558pgcj7zc1.png' },
    { name: 'Lime', probability: 1/45000, image: 'https://m.media-amazon.com/images/I/81KoXfeCD1L.jpg' },
    { name: 'Blueberry', probability: 1/46000, image: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRT7A9xxm3GXrCTjqrkepIR0V_W86gfQXh0-A&s' },
    { name: 'Raspberry', probability: 1/47000, image: 'https://i.pinimg.com/736x/d4/4b/69/d44b697d1b0da0f857364f71db2d08bd.jpg' },
    { name: 'Blackberry', probability: 1/48000, image: 'https://i.pinimg.com/736x/d0/56/a9/d056a9870343c8e4e7e9e794b9abbce8.jpg' },
    { name: 'Dragon Fruit', probability: 1/49000, image: 'https://img.ifunny.co/images/551dc2c59732ebfc75838dc5ec997ccf56d33e2337cf2fa4dffb6a8761f4bcbf_1.jpg' },
    { name: 'Papaya', probability: 1/50000, image: 'https://ih1.redbubble.net/image.2657849200.5846/raf,360x360,075,t,fafafa:ca443f4786.jpg' },
    // Meme
    { name: 'Doge', probability: 1/500, image: 'https://kenh14cdn.com/zoom/594_371/203336854389633024/2024/5/26/photo1716706342049-17167063421621541902854.jpg' },
    { name: 'Pepe', probability: 1/1000, image: 'https://static01.nyt.com/images/2016/09/28/us/28xp-pepefrog/28xp-pepefrog-superJumbo.jpg' },
    { name: 'Grumpy Cat', probability: 1/2000, image: 'https://ew.com/thmb/0_PyYU_Nym5fWeedIxPb6WHiuRQ=/1500x0/filters:no_upscale():max_bytes(150000):strip_icc()/b31-92532f841b9349638d226a6c62aa9e85.jpg' },
    { name: 'Nyan Cat', probability: 1/3000, image: 'https://upload.wikimedia.org/wikipedia/vi/b/b7/Nyan_Cat_250px.png' },
    { name: 'Trollface', probability: 1/4000, image: 'https://upload.wikimedia.org/wikipedia/en/7/73/Trollface.png' },
    { name: 'Success Kid', probability: 1/5000, image: 'https://upload.wikimedia.org/wikipedia/en/f/ff/SuccessKid.jpg' },
    { name: 'Bad Luck Brian', probability: 1/6000, image: 'https://www-s3-live.kent.edu/s3fs-root/s3fs-public/styles/fixed_width_1200/public/syiviojoq72a1_0.jpg?VersionId=DM4DX1t4FsSOHDesXvmUlI52c_TFW9iR&itok=YAqV2OUS' },
    { name: 'Dancing Baby', probability: 1/7000, image: 'https://i.pinimg.com/originals/a4/27/98/a42798da3846ddfc1a8a13e3d114e696.gif' },
    { name: 'Salt Bae', probability: 1/8000, image: 'https://media-cldnry.s-nbcnews.com/image/upload/t_fit-760w,f_auto,q_auto:best/newscms/2017_05/1890591/170203-salt-bae-mn-1530.jpg' },
    { name: 'Distracted Boyfriend', probability: 1/9000, image: 'https://media.wired.com/photos/59a459d3b345f64511c5e3d4/master/pass/MemeLoveTriangle_297886754.jpg' },
    // Nhân vật nổi tiếng
    { name: 'Elon Musk', probability: 1/10000, image: 'https://cdn-images.vtv.vn/zoom/640_400/66349b6076cb4dee98746cf1/2024/11/12/elon-musk-97432930993441922212990-05400702350001787647929.webp' },
    { name: 'Albert Einstein', probability: 1/11000, image: 'https://upload.wikimedia.org/wikipedia/commons/thumb/5/5a/Albert_Einstein_sticks_his_tongue_1951.jpg/189px-Albert_Einstein_sticks_his_tongue_1951.jpg' },
    { name: 'Isaac Newton', probability: 1/12000, image: 'https://upload.wikimedia.org/wikipedia/commons/3/3b/Portrait_of_Sir_Isaac_Newton%2C_1689.jpg' },
    { name: 'Nikola Tesla', probability: 1/13000, image: 'https://upload.wikimedia.org/wikipedia/commons/thumb/7/79/Tesla_circa_1890.jpeg/800px-Tesla_circa_1890.jpeg' },
    { name: 'Marie Curie', probability: 1/14000, image: 'https://upload.wikimedia.org/wikipedia/commons/thumb/c/c8/Marie_Curie_c._1920s.jpg/800px-Marie_Curie_c._1920s.jpg' },
    { name: 'Leonardo da Vinci', probability: 1/15000, image: 'https://www.misa.vn/wp-content/uploads/2020/06/MISA_bai_hoc_nghe_nghiep.jpg' },
    { name: 'Steve Jobs', probability: 1/16000, image: 'https://vcdn1-sohoa.vnecdn.net/2021/02/16/v2-4f48da9ef042a1915ebfedd0682-6733-6243-1613447924.jpg?w=460&h=0&q=100&dpr=2&fit=crop&s=IMz9OQIgjN-kBBfTL-MJFQ' },
    { name: 'Bill Gates', probability: 1/17000, image: 'https://yt3.googleusercontent.com/WuPodYLA22bumFSAnf654wJ8cE7n2Zb8M2KEF5B3RiyziqLTXQpp6JXBYOSH8zifY_jihWVq=s900-c-k-c0x00ffffff-no-rj' },
    { name: 'Mark Zuckerberg', probability: 1/18000, image: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQRG9OyOlAU8bvwAbAYiegM42OYvOI6m5yaKA&s' },
    { name: 'Oprah Winfrey', probability: 1/19000, image: 'https://hips.hearstapps.com/hmg-prod/images/oprah-winfrey-arrives-at-the-premiere-of-owns-david-makes-news-photo-1678107564.jpg?crop=0.989xw:0.851xh;0.00489xw,0.0112xh&resize=1200:*' },
    // Phim
    { name: 'Shrek', probability: 1/20000, image: 'https://m.media-amazon.com/images/M/MV5BZDE2ZjIxYzUtZTJjYS00OWQ0LTk2NGEtMDliYmI3MzMwYjhkXkEyXkFqcGdeQWFsZWxvZw@@._V1_.jpg' },
    { name: 'SpongeBob', probability: 1/21000, image: 'https://upload.wikimedia.org/wikipedia/en/thumb/3/3b/SpongeBob_SquarePants_character.svg/800px-SpongeBob_SquarePants_character.svg.png' },
    { name: 'Minion', probability: 1/22000, image: 'https://i.ytimg.com/vi/IGJVbIHTTqs/maxresdefault.jpg' },
    { name: 'Pikachu', probability: 1/23000, image: 'https://media.wired.com/photos/5f87340d114b38fa1f8339f9/master/w_1600%2Cc_limit/Ideas_Surprised_Pikachu_HD.jpg' },
    { name: 'Iron Man', probability: 1/24000, image: 'https://media.pinatafarm.com/protected/9CB33540-63CA-4013-AD4C-17771C92EDC4/4300f891-6628-4b9c-af27-766d8e8adbe1-1720020684038-pfarm-with-png-watermarked.webp' },
    { name: 'Batman', probability: 1/25000, image: 'https://static1.cbrimages.com/wordpress/wp-content/uploads/2019/02/Batman-slapping-Robin-Meme-Blank.jpg' },
    { name: 'Superman', probability: 1/26000, image: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRizsNvFaMGhKbGOIT4urkyg-QOdam7FH7S6A&s' },
    { name: 'Goku', probability: 1/27000, image: 'https://example.com/goku.png' },
    { name: 'Naruto', probability: 1/28000, image: 'https://example.com/naruto.png' },
    { name: 'Mario', probability: 1/29000, image: 'https://example.com/mario.png' },
    { name: 'Luigi', probability: 1/30000, image: 'https://example.com/luigi.png' },
    { name: 'Yoda', probability: 1/31000, image: 'https://example.com/yoda.png' },
    { name: 'Darth Vader', probability: 1/32000, image: 'https://example.com/darthvader.png' },
    { name: 'Harry Potter', probability: 1/33000, image: 'https://example.com/harrypotter.png' },
    { name: 'Hermione', probability: 1/34000, image: 'https://example.com/hermione.png' },
    { name: 'Ron Weasley', probability: 1/35000, image: 'https://example.com/ronweasley.png' },
    { name: 'Frodo', probability: 1/36000, image: 'https://example.com/frodo.png' },
    { name: 'Gandalf', probability: 1/37000, image: 'https://example.com/gandalf.png' },
    { name: 'Legolas', probability: 1/38000, image: 'https://example.com/legolas.png' },
    { name: 'Aragorn', probability: 1/39000, image: 'https://example.com/aragorn.png' },
    { name: 'Thanos', probability: 1/40000, image: 'https://example.com/thanos.png' },
    { name: 'Captain America', probability: 1/41000, image: 'https://example.com/captainamerica.png' },
    { name: 'Thor', probability: 1/42000, image: 'https://example.com/thor.png' },
    { name: 'Hulk', probability: 1/43000, image: 'https://example.com/hulk.png' },
    { name: 'Black Widow', probability: 1/44000, image: 'https://example.com/blackwidow.png' },
    { name: 'Spider-Man', probability: 1/45000, image: 'https://example.com/spiderman.png' },
    { name: 'Wolverine', probability: 1/46000, image: 'https://example.com/wolverine.png' },
    { name: 'Deadpool', probability: 1/47000, image: 'https://example.com/deadpool.png' },
    { name: 'Joker', probability: 1/48000, image: 'https://example.com/joker.png' },
    { name: 'Shrek', probability: 1/49000, image: 'https://example.com/shrek.png' },
    { name: 'SpongeBob', probability: 1/50000, image: 'https://example.com/spongebob.png' },
    { name: 'Minion', probability: 1/51000, image: 'https://example.com/minion.png' },
    { name: 'Pikachu', probability: 1/52000, image: 'https://example.com/pikachu.png' },
    { name: 'Iron Man', probability: 1/53000, image: 'https://example.com/ironman.png' },
    { name: 'Batman', probability: 1/54000, image: 'https://example.com/batman.png' },
    { name: 'Superman', probability: 1/55000, image: 'https://example.com/superman.png' },
    { name: 'Goku', probability: 1/56000, image: 'https://example.com/goku.png' },
    { name: 'Naruto', probability: 1/57000, image: 'https://example.com/naruto.png' },
    { name: 'Mario', probability: 1/58000, image: 'https://example.com/mario.png' },
    { name: 'Luigi', probability: 1/59000, image: 'https://example.com/luigi.png' },
    { name: 'Yoda', probability: 1/60000, image: 'https://example.com/yoda.png' },
    { name: 'Darth Vader', probability: 1/61000, image: 'https://example.com/darthvader.png' },
    { name: 'Harry Potter', probability: 1/62000, image: 'https://example.com/harrypotter.png' },
    { name: 'Hermione', probability: 1/63000, image: 'https://example.com/hermione.png' },
    { name: 'Ron Weasley', probability: 1/64000, image: 'https://example.com/ronweasley.png' },
    { name: 'Frodo', probability: 1/65000, image: 'https://example.com/frodo.png' },
    { name: 'Gandalf', probability: 1/66000, image: 'https://example.com/gandalf.png' },
    { name: 'Legolas', probability: 1/67000, image: 'https://example.com/legolas.png' },
    { name: 'Aragorn', probability: 1/68000, image: 'https://example.com/aragorn.png' },
    { name: 'Thanos', probability: 1/69000, image: 'https://example.com/thanos.png' },
    { name: 'Captain America', probability: 1/70000, image: 'https://example.com/captainamerica.png' },
    { name: 'Thor', probability: 1/71000, image: 'https://example.com/thor.png' },
    { name: 'Hulk', probability: 1/72000, image: 'https://example.com/hulk.png' },
    { name: 'Black Widow', probability: 1/73000, image: 'https://example.com/blackwidow.png' },
    { name: 'Spider-Man', probability: 1/74000, image: 'https://example.com/spiderman.png' },
    { name: 'Wolverine', probability: 1/75000, image: 'https://example.com/wolverine.png' },
    { name: 'Deadpool', probability: 1/76000, image: 'https://example.com/deadpool.png' },
    { name: 'Joker', probability: 1/77000, image: 'https://example.com/joker.png' },
    // Easter egg
    { name: 'Golden Snitch', probability: 1/78000, image: 'https://example.com/goldensnitch.png' },
    { name: 'Infinity Gauntlet', probability: 1/79000, image: 'https://example.com/infinitygauntlet.png' },
    { name: 'One Ring', probability: 1/80000, image: 'https://example.com/onering.png' },
    { name: 'Lightsaber', probability: 1/81000, image: 'https://example.com/lightsaber.png' },
    { name: 'Triforce', probability: 1/82000, image: 'https://example.com/triforce.png' },
    { name: 'Master Sword', probability: 1/83000, image: 'https://example.com/mastersword.png' },
    { name: 'Portal Gun', probability: 1/84000, image: 'https://example.com/portalgun.png' },
    { name: 'Hoverboard', probability: 1/85000, image: 'https://example.com/hoverboard.png' },
    { name: 'DeLorean', probability: 1/86000, image: 'https://example.com/delorean.png' },
    { name: 'Flux Capacitor', probability: 1/87000, image: 'https://example.com/fluxcapacitor.png' },
    { name: 'TARDIS', probability: 1/88000, image: 'https://example.com/tardis.png' },
    { name: 'Sonic Screwdriver', probability: 1/89000, image: 'https://example.com/sonicscrewdriver.png' },
    { name: 'Phaser', probability: 1/90000, image: 'https://example.com/phaser.png' },
    { name: 'Batmobile', probability: 1/91000, image: 'https://example.com/batmobile.png' },
    { name: 'Mjolnir', probability: 1/92000, image: 'https://example.com/mjolnir.png' },
    { name: 'Stormbreaker', probability: 1/93000, image: 'https://example.com/stormbreaker.png' },
    { name: 'Vibranium Shield', probability: 1/94000, image: 'https://example.com/vibraniumshield.png' },
    { name: 'Arc Reactor', probability: 1/95000, image: 'https://example.com/arcreactor.png' },
    { name: 'Web Shooters', probability: 1/96000, image: 'https://example.com/webshooters.png' },
    { name: 'Adamantium Claws', probability: 1/97000, image: 'https://example.com/adamantiumclaws.png' },
    { name: 'Chimichanga', probability: 1/98000, image: 'https://example.com/chimichanga.png' },
    { name: 'Batarang', probability: 1/99000, image: 'https://example.com/batarang.png' },
    { name: 'Utility Belt', probability: 1/100000, image: 'https://example.com/utilitybelt.png' },
    { name: 'Bat Signal', probability: 1/110000, image: 'https://example.com/batsignal.png' },
    { name: 'Kryptonite', probability: 1/120000, image: 'https://example.com/kryptonite.png' },
    { name: 'Daily Planet', probability: 1/130000, image: 'https://example.com/dailyplanet.png' },
    { name: 'Fortress of Solitude', probability: 1/140000, image: 'https://example.com/fortressofsolitude.png' },
    { name: 'Bat Cave', probability: 1/150000, image: 'https://example.com/batcave.png' },
    { name: 'Wayne Manor', probability: 1/160000, image: 'https://example.com/waynemanor.png' },
    { name: 'Hall of Justice', probability: 1/170000, image: 'https://example.com/hallofjustice.png' },
    { name: 'Watchtower', probability: 1/180000, image: 'https://example.com/watchtower.png' },
    { name: 'Invisible Jet', probability: 1/190000, image: 'https://example.com/invisiblejet.png' },
    { name: 'Lasso of Truth', probability: 1/200000, image: 'https://example.com/lassooftruth.png' },
    { name: 'Bracelets of Submission', probability: 1/210000, image: 'https://example.com/braceletsofsubmission.png' },
    { name: 'Wonder Woman\'s Tiara', probability: 1/220000, image: 'https://example.com/wonderwomanstiara.png' },
    { name: 'Green Lantern Ring', probability: 1/230000, image: 'https://example.com/greenlanternring.png' },
    { name: 'Power Ring', probability: 1/240000, image: 'https://example.com/powerring.png' },
    { name: 'Mother Box', probability: 1/250000, image: 'https://example.com/motherbox.png' },
    { name: 'Boom Tube', probability: 1/260000, image: 'https://example.com/boomtube.png' },
    { name: 'Omega Beam', probability: 1/270000, image: 'https://example.com/omegabeam.png' },
    { name: 'Bat Signal', probability: 1/280000, image: 'https://example.com/batsignal.png' },
    { name: 'Kryptonite', probability: 1/290000, image: 'https://example.com/kryptonite.png' },
    { name: 'Daily Planet', probability: 1/300000, image: 'https://example.com/dailyplanet.png' },
    { name: 'Fortress of Solitude', probability: 1/310000, image: 'https://example.com/fortressofsolitude.png' },
    { name: 'Bat Cave', probability: 1/320000, image: 'https://example.com/batcave.png' },
    { name: 'Wayne Manor', probability: 1/330000, image: 'https://example.com/waynemanor.png' },
    { name: 'Hall of Justice', probability: 1/340000, image: 'https://example.com/hallofjustice.png' },
    { name: 'Watchtower', probability: 1/350000, image: 'https://example.com/watchtower.png' },
    { name: 'Invisible Jet', probability: 1/360000, image: 'https://example.com/invisiblejet.png' },
    { name: 'Lasso of Truth', probability: 1/370000, image: 'https://example.com/lassooftruth.png' },
    { name: 'Bracelets of Submission', probability: 1/380000, image: 'https://example.com/braceletsofsubmission.png' },
    { name: 'Wonder Woman\'s Tiara', probability: 1/390000, image: 'https://example.com/wonderwomanstiara.png' },
    { name: 'Green Lantern Ring', probability: 1/400000, image: 'https://example.com/greenlanternring.png' },
    { name: 'Power Ring', probability: 1/410000, image: 'https://example.com/powerring.png' },
    { name: 'Mother Box', probability: 1/420000, image: 'https://example.com/motherbox.png' },
    { name: 'Boom Tube', probability: 1/430000, image: 'https://example.com/boomtube.png' },
    { name: 'Omega Beam', probability: 1/440000, image: 'https://example.com/omegabeam.png' },
    { name: 'Bat Signal', probability: 1/450000, image: 'https://example.com/batsignal.png' },
    { name: 'Kryptonite', probability: 1/460000, image: 'https://example.com/kryptonite.png' },
    { name: 'Daily Planet', probability: 1/470000, image: 'https://example.com/dailyplanet.png' },
    { name: 'Fortress of Solitude', probability: 1/480000, image: 'https://example.com/fortressofsolitude.png' },
    { name: 'Bat Cave', probability: 1/490000, image: 'https://example.com/batcave.png' },
    { name: 'Wayne Manor', probability: 1/500000, image: 'https://example.com/waynemanor.png' },
    { name: 'Hall of Justice', probability: 1/510000, image: 'https://example.com/hallofjustice.png' },
    { name: 'Watchtower', probability: 1/520000, image: 'https://example.com/watchtower.png' },
    { name: 'Invisible Jet', probability: 1/530000, image: 'https://example.com/invisiblejet.png' },
    { name: 'Lasso of Truth', probability: 1/540000, image: 'https://example.com/lassooftruth.png' },
    { name: 'Bracelets of Submission', probability: 1/550000, image: 'https://example.com/braceletsofsubmission.png' },
    { name: 'Wonder Woman\'s Tiara', probability: 1/560000, image: 'https://example.com/wonderwomanstiara.png' },
    { name: 'Green Lantern Ring', probability: 1/570000, image: 'https://example.com/greenlanternring.png' },
    { name: 'Power Ring', probability: 1/580000, image: 'https://example.com/powerring.png' },
    { name: 'Mother Box', probability: 1/590000, image: 'https://example.com/motherbox.png' },
    { name: 'Boom Tube', probability: 1/600000, image: 'https://example.com/boomtube.png' },
    { name: 'Omega Beam', probability: 1/610000, image: 'https://example.com/omegabeam.png' },
    { name: 'Bat Signal', probability: 1/620000, image: 'https://example.com/batsignal.png' },
    { name: 'Kryptonite', probability: 1/630000, image: 'https://example.com/kryptonite.png' },
    { name: 'Daily Planet', probability: 1/640000, image: 'https://example.com/dailyplanet.png' },
    { name: 'Fortress of Solitude', probability: 1/650000, image: 'https://example.com/fortressofsolitude.png' },
    { name: 'Bat Cave', probability: 1/660000, image: 'https://example.com/batcave.png' },
    { name: 'Wayne Manor', probability: 1/670000, image: 'https://example.com/waynemanor.png' },
    { name: 'Hall of Justice', probability: 1/680000, image: 'https://example.com/hallofjustice.png' },
    { name: 'Watchtower', probability: 1/690000, image: 'https://example.com/watchtower.png' },
    { name: 'Invisible Jet', probability: 1/700000, image: 'https://example.com/invisiblejet.png' },
    { name: 'Lasso of Truth', probability: 1/710000, image: 'https://example.com/lassooftruth.png' },
    { name: 'Bracelets of Submission', probability: 1/720000, image: 'https://example.com/braceletsofsubmission.png' },
    { name: 'Wonder Woman\'s Tiara', probability: 1/730000, image: 'https://example.com/wonderwomanstiara.png' },
    { name: 'Green Lantern Ring', probability: 1/740000, image: 'https://example.com/greenlanternring.png' },
    { name: 'Power Ring', probability: 1/750000, image: 'https://example.com/powerring.png' },
    { name: 'Mother Box', probability: 1/760000, image: 'https://example.com/motherbox.png' },
    { name: 'Boom Tube', probability: 1/770000, image: 'https://example.com/boomtube.png' },
    { name: 'Omega Beam', probability: 1/780000, image: 'https://example.com/omegabeam.png' },
    { name: 'Bat Signal', probability: 1/790000, image: 'https://example.com/batsignal.png' },
    { name: 'Kryptonite', probability: 1/800000, image: 'https://example.com/kryptonite.png' },
    { name: 'Daily Planet', probability: 1/810000, image: 'https://example.com/dailyplanet.png' },
    { name: 'Fortress of Solitude', probability: 1/820000, image: 'https://example.com/fortressofsolitude.png' },
    { name: 'Bat Cave', probability: 1/830000, image: 'https://example.com/batcave.png' },
    { name: 'Wayne Manor', probability: 1/840000, image: 'https://example.com/waynemanor.png' },
    { name: 'Hall of Justice', probability: 1/850000, image: 'https://example.com/hallofjustice.png' },
    { name: 'Watchtower', probability: 1/860000, image: 'https://example.com/watchtower.png' },
    { name: 'Invisible Jet', probability: 1/870000, image: 'https://example.com/invisiblejet.png' },
    //meme shiny
    { name: 'Doge shiny', probability: 1/999999, image: 'https://example.com/doge.png' },
    { name: 'Pepe shiny', probability: 1/2000000, image: 'https://example.com/pepe.png' },
    { name: 'Grumpy Cat shiny', probability: 1/3000000, image: 'https://example.com/grumpycat.png' },
    { name: 'Nyan Cat shiny', probability: 1/4000000, image: 'https://example.com/nyancat.png' },
    { name: 'Trollface shiny', probability: 1/5000000, image: 'https://example.com/trollface.png' },
    { name: 'Success Kid shiny', probability: 1/6000000, image: 'https://example.com/successkid.png' },
    { name: 'Bad Luck Brian shiny', probability: 1/7000000, image: 'https://example.com/badluckbrian.png' },
    { name: 'Dancing Baby shiny', probability: 1/8000000, image: 'https://example.com/dancingbaby.png' },
    { name: 'Salt Bae shiny', probability: 1/9000000, image: 'https://example.com/saltbae.png' },
    { name: 'Distracted Boyfriend shiny', probability: 1/10000000, image: 'https://example.com/distractedboyfriend.png' },
    { name: 'Hide the Pain Harold shiny', probability: 1/11000000, image: 'https://example.com/hidethepainharold.png' },
    { name: 'Philosoraptor shiny', probability: 1/12000000, image: 'https://example.com/philosoraptor.png' },
    { name: 'Overly Attached Girlfriend shiny', probability: 1/13000000, image: 'https://example.com/overlyattachedgirlfriend.png' },
    { name: 'Scumbag Steve shiny', probability: 1/14000000, image: 'https://example.com/scumbagsteve.png' },
    { name: 'Y U No Guy shiny', probability: 1/15000000, image: 'https://example.com/yunoguy.png' },
    { name: 'Condescending Wonka shiny', probability: 1/16000000, image: 'https://example.com/condescendingwonka.png' },
    { name: 'Ermahgerd Girl shiny', probability: 1/17000000, image: 'https://example.com/ermahgerdgirl.png' },
    { name: 'First World Problems shiny', probability: 1/18000000, image: 'https://example.com/firstworldproblems.png' },
    { name: 'Futurama Fry shiny', probability: 1/19000000, image: 'https://example.com/futuramafry.png' },
    { name: 'Good Guy Greg shiny', probability: 1/20000000, image: 'https://example.com/goodguygreg.png' },
    { name: 'Roll Safe shiny', probability: 1/21000000, image: 'https://example.com/rollsafe.png' },
    { name: 'Mocking SpongeBob shiny', probability: 1/22000000, image: 'https://example.com/mockingspongebob.png' },
    { name: 'Arthur Fist shiny', probability: 1/23000000, image: 'https://example.com/arthurfist.png' },
    { name: 'Expanding Brain shiny', probability: 1/24000000, image: 'https://example.com/expandingbrain.png' },
    { name: 'Is This a Pigeon? shiny', probability: 1/25000000, image: 'https://example.com/isthisapigeon.png' },
    { name: 'Surprised Pikachu shiny', probability: 1/26000000, image: 'https://example.com/surprisedpikachu.png' },
    { name: 'Epic Sax Guy shiny', probability: 1/27000000, image: 'https://example.com/epicsaxguy.png' },
    { name: 'Disaster Girl shiny', probability: 1/28000000, image: 'https://example.com/disastergirl.png' },
    { name: 'Ancient Aliens shiny', probability: 1/29000000, image: 'https://example.com/ancientaliens.png' },
    { name: 'Hide the Pain Harold shiny', probability: 1/30000000, image: 'https://example.com/hidethepainharold.png' },
    { name: 'Philosoraptor shiny', probability: 1/31000000, image: 'https://example.com/philosoraptor.png' }
        ];

        let spinCount = 0;
        let isGenerating = false;
        let money = 0;
        let luckMultiplier = 1; // Biến để lưu trữ độ may mắn
        let totalCoins = 0; // Tổng số coin đã có từ trước đến nay
        let bestRandom = 0; // Lần random may nhất
        let totalTimePlayed = 0; // Tổng thời gian đã chơi từ trước đến nay
        let startTime = Date.now(); // Thời gian bắt đầu chơi

        // Load data from localStorage
        window.onload = function() {
            loadSavedData();
        };

        function loadSavedData() {
            const savedPets = JSON.parse(localStorage.getItem('petsHistory')) || [];
            const savedMoney = parseInt(localStorage.getItem('money')) || 0;
            const savedSpinCount = parseInt(localStorage.getItem('spinCount')) || 0;
            const savedTotalCoins = parseInt(localStorage.getItem('totalCoins')) || 0;
            const savedBestRandom = parseInt(localStorage.getItem('bestRandom')) || 0;
            const savedTotalTimePlayed = parseInt(localStorage.getItem('totalTimePlayed')) || 0;

            money = savedMoney;
            spinCount = savedSpinCount;
            totalCoins = savedTotalCoins;
            bestRandom = savedBestRandom;
            totalTimePlayed = savedTotalTimePlayed;
            document.getElementById('money').innerText = money;
            document.getElementById('spin-count').innerText = `Tổng số lần quay: ${spinCount}`;

            savedPets.forEach(pet => {
                addPetToHistory(pet.name, pet.probability, pet.image);
            });

            updateSpinCount();
        }

        function saveData() {
            const petsHistory = [];
            const tableBody = document.getElementById('history-table').getElementsByTagName('tbody')[0];
            for (let i = 0; i < tableBody.rows.length; i++) {
                const row = tableBody.rows[i];
                petsHistory.push({
                    name: row.cells[0].innerText,
                    probability: parseInt(row.cells[1].innerText.split(' ')[2]),
                    image: row.cells[2].querySelector('button').dataset.image
                });
            }
            localStorage.setItem('petsHistory', JSON.stringify(petsHistory));
            localStorage.setItem('money', money);
            localStorage.setItem('spinCount', spinCount);
            localStorage.setItem('totalCoins', totalCoins);
            localStorage.setItem('bestRandom', bestRandom);
            localStorage.setItem('totalTimePlayed', totalTimePlayed);
        }

        function generateRandomPet() {
            if (isGenerating) return;
            isGenerating = true;

            document.getElementById('result').innerText = 'Đang tạo...';
            document.getElementById('probability').innerText = '';

            const countdownBar = document.getElementById('countdown-bar');
            countdownBar.style.transition = 'none';
            countdownBar.style.width = '100%';
            setTimeout(() => {
                countdownBar.style.transition = 'width 2s linear';
                countdownBar.style.width = '0%';
            }, 10);

            let countdown = 2;
            let intervalTime = 100;
            const interval = setInterval(() => {
                const randomPet = pets[Math.floor(Math.random() * pets.length)];
                document.getElementById('result').innerText = `Đang ngẫu nhiên: ${randomPet.name}`;
                countdown -= 0.1;
                intervalTime += 50;
                if (countdown <= 0) {
                    clearInterval(interval);
                    showFinalPet();
                    isGenerating = false;
                }
            }, intervalTime);

            // Check if the godspeedrandom code is active
            if (document.getElementById('countdown-bar').style.transition === 'width 0.2s linear') {
                clearInterval(interval);
                setTimeout(() => {
                    showFinalPet();
                    isGenerating = false;
                }, 200);
            }
        }

        function showFinalPet() {
            spinCount++;
            let selectedPet = '';
            let selectedProbability = 0;
            let selectedImage = '';
            let luckFactor = (1 + Math.floor(spinCount / 10) * 0.1 + Math.floor(spinCount / 100) * 1 + Math.floor(spinCount / 1000) * 10) * luckMultiplier;

            while (!selectedPet) {
                const random = Math.random() * luckFactor;
                let cumulativeProbability = 0;

                for (const pet of pets) {
                    cumulativeProbability += pet.probability;
                    if (random < cumulativeProbability) {
                        selectedPet = pet.name;
                        selectedProbability = Math.round(1 / pet.probability);
                        selectedImage = pet.image;
                        break;
                    }
                }
            }

            document.getElementById('result').innerText = `Bạn nhận được: ${selectedPet}`;
            document.getElementById('probability').innerText = `Xác suất: 1 trong ${selectedProbability}`;
            document.getElementById('pet-image').src = selectedImage;
            addPetToHistory(selectedPet, selectedProbability, selectedImage);
            updateSpinCount();
            addMoney(selectedProbability);
            saveData(); // Save data after generating a pet

            // Cập nhật lần random may nhất
            if (bestRandom === 0 || selectedProbability > bestRandom) {
                bestRandom = selectedProbability;
            }

            // Hiển thị GIF nếu độ hiếm từ 1 trong 10000 trở lên
            if (selectedProbability >= 10000) {
                const gifContainer = document.createElement('div');
                gifContainer.style.position = 'fixed';
                gifContainer.style.top = '0';
                gifContainer.style.left = '0';
                gifContainer.style.width = '100%';
                gifContainer.style.height = '100%';
                gifContainer.style.display = 'flex';
                gifContainer.style.justifyContent = 'center';
                gifContainer.style.alignItems = 'center';
                gifContainer.style.backgroundColor = 'rgba(0, 0, 0, 0.8)';
                gifContainer.style.zIndex = '1000';

                const gif = document.createElement('img');
                gif.src = 'https://i.makeagif.com/media/11-22-2024/jwq3N7.gif';
                gif.style.maxWidth = '100%';
                gif.style.maxHeight = '100%';
                gifContainer.appendChild(gif);

                document.body.appendChild(gifContainer);

                setTimeout(() => {
                    gifContainer.remove();
                }, 15000); // 15 giây
            }
        }

        function addPetToHistory(pet, probability, image) {
            const tableBody = document.getElementById('history-table').getElementsByTagName('tbody')[0];
            let found = false;

            for (let i = 0; i < tableBody.rows.length; i++) {
                const row = tableBody.rows[i];
                if (row.cells[0].innerText.includes(pet)) {
                    const count = parseInt(row.cells[0].innerText.split(' x')[1] || 1) + 1;
                    row.cells[0].innerText = `${pet} x${count}`;
                    found = true;
                    break;
                }
            }

            if (!found) {
                const newRow = tableBody.insertRow();
                const petCell = newRow.insertCell(0);
                const probabilityCell = newRow.insertCell(1);
                const infoCell = newRow.insertCell(2);
                petCell.innerText = pet;
                probabilityCell.innerText = `1 trong ${probability}`;
                const infoButton = document.createElement('button');
                infoButton.innerText = 'ℹ️';
                infoButton.dataset.image = image;
                infoButton.onclick = () => showPetModal(pet, probability, image);
                infoCell.appendChild(infoButton);
            }
        }

        function updateSpinCount() {
            document.getElementById('spin-count').innerText = `Tổng số lần quay: ${spinCount}`;
            const nextLuck = 10 - (spinCount % 10);
            document.getElementById('next-luck').innerHTML = `Số lần quay đến khi tăng may mắn tiếp theo: ${nextLuck} <img src="https://pbs.twimg.com/media/GUmOAk8WMAEqeun.png" alt="Luck Icon" class="luck-icon">`;
        }

        function normalizeCode(input) {
            let code = input.value.toLowerCase().replace(/\s+/g, '');
            code = code.normalize('NFD').replace(/[\u0300-\u036f]/g, '');
            input.value = code;
        }

        function submitCode() {
            const code = document.getElementById('code-input').value;
            if (code === "meobeothichmcdonald") {
                const pet = "MeoBeo";
                const probability = 9999;
                document.getElementById('result').innerText = `Bạn nhận được: ${pet}`;
                document.getElementById('probability').innerText = `Xác suất: 1 trong ${probability}`;
                document.getElementById('pet-image').src = 'https://phapluatxahoi.kinhtedothi.vn/stores/news_dataimages/2024/052024/10/19/in_article/ebd5c0ee2760fbb97936cb6b2baf9e6d.jpg?rt=20240510194835';
                addPetToHistory(pet, probability, 'https://phapluatxahoi.kinhtedothi.vn/stores/news_dataimages/2024/052024/10/19/in_article/ebd5c0ee2760fbb97936cb6b2baf9e6d.jpg?rt=20240510194835');
                addMoney(probability);
                saveData(); // Save data after submitting code
            } else if (code === "godspeedrandom") {
                applyGodspeedRandom();
                alert("Thời gian hồi đã giảm xuống còn 0.2 giây!");
            } else if (code === "test_mode") {
                const multiplier = prompt("Nhập độ may mắn (x1 đến x100):");
                if (multiplier && !isNaN(multiplier) && multiplier >= 1 && multiplier <= 100) {
                    luckMultiplier = multiplier;
                    alert(`Độ may mắn đã được đặt thành x${multiplier}`);
                } else {
                    alert("Giá trị không hợp lệ. Vui lòng nhập số từ 1 đến 100.");
                }
            } else {
                alert("Mã không hợp lệ");
            }
        }

        function applyGodspeedRandom() {
            const countdownBar = document.getElementById('countdown-bar');
            countdownBar.style.transition = 'none';
            countdownBar.style.width = '100%';
            setTimeout(() => {
                countdownBar.style.transition = 'width 0.2s linear';
                countdownBar.style.width = '0%';
            }, 10);
        }

        function addMoney(probability) {
            const coins = probability; // Số xu nhận được bằng với độ hiếm của pet
            money += coins;
            totalCoins += coins;
            document.getElementById('money').innerText = money;

            // Chỉ hiển thị hiệu ứng tiền bay lên nếu độ hiếm nhỏ hơn 1 trong 600
            if (probability < 600) {
                for (let i = 0; i < coins; i++) {
                    const coin = document.createElement('div');
                    coin.className = 'coin';
                    coin.innerText = '🪙'; // Thay thế bằng icon tiền của bạn
                    document.body.appendChild(coin);
                    coin.style.left = `${Math.random() * 100}%`;
                    setTimeout(() => {
                        coin.remove();
                    }, 1000);
                }
            }

            saveData(); // Save data after adding money
        }

        function showInfoModal() {
            totalTimePlayed += Math.floor((Date.now() - startTime) / 1000); // Cập nhật tổng thời gian đã chơi
            document.getElementById('total-time').innerText = `Tổng thời gian đã chơi: ${totalTimePlayed} giây`;
            document.getElementById('best-random').innerText = `Lần random may nhất: 1 trong ${bestRandom}`;
            document.getElementById('total-coins').innerText = `Tổng số coin đã có: ${totalCoins}`;
            document.getElementById('info-modal').style.display = 'flex';
        }

        function showPetModal(pet, probability, image) {
            document.getElementById('pet-modal-image').src = image;
            document.getElementById('pet-modal-info').innerText = `Tên: ${pet}\nXác suất: 1 trong ${probability}`;
            document.getElementById('pet-modal').style.display = 'flex';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }
    </script>
</body>
</html>
